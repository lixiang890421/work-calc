<!DOCTYPE html> <!-- å®šç¾© HTML5 æ–‡ä»¶ -->
<html lang="zh-Hant"> <!-- è¨­å®šèªç³»ç‚ºç¹é«”ä¸­æ–‡ -->
<head>
  <meta charset="UTF-8" /> <!-- è¨­å®šç·¨ç¢¼ç‚º UTF-8 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- æ‰‹æ©Ÿè£ç½®é©é… -->
  <title>ç¤¾ç•œçŸ­æš«è„«é›¢è¨ˆç®—å™¨V2.0</title> <!-- æ¨™é¡Œåˆ—åç¨± -->
  <style>
    body { /* æ•´é«”ç¶²é èƒŒæ™¯èˆ‡å­—å‹æ’ç‰ˆè¨­å®š */
      display: flex; /* ä½¿ç”¨ flex æ’ç‰ˆ */
      flex-direction: column; /* å‚ç›´æ’åˆ— */
      align-items: center; /* æ°´å¹³ç½®ä¸­ */
      justify-content: center; /* å‚ç›´ç½®ä¸­ */
      height: 100vh; /* æ»¿ç‰ˆé«˜ */
      font-family: 'DFKai-SB', 'æ¨™æ¥·é«”', serif; /* å­—å‹ */
      margin: 0; /* ç„¡é‚Šè· */
      padding: 1rem; /* é‚Šå…§è· */
      background: #f5f5f5; /* èƒŒæ™¯é¡è‰² */
    }
    .container { /* ç™½è‰²å¡ç‰‡å€å¡Š */
      background: #fff; /* èƒŒæ™¯ç™½è‰² */
      padding: 2rem; /* å…§è· */
      border-radius: 0.75rem; /* åœ“è§’ */
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* é™°å½± */
      width: 100%; /* æ»¿ç‰ˆå¯¬åº¦ */
      max-width: 440px; /* æœ€å¤§å¯¬åº¦ */
      text-align: center; /* æ–‡å­—ç½®ä¸­ */
    }
    .stamp { /* æµ®æ°´å°æ¨£å¼ */
      display: inline-block; /* è¡Œå…§å€å¡Š */
      border: 2px solid #e57373; /* ç´…è‰²é‚Šæ¡† */
      color: #e57373; /* ç´…è‰²æ–‡å­— */
      padding: 0.25em 1em; /* å…§è· */
      font-size: 1.5rem; /* å­—å‹å¤§å° */
      margin-bottom: 1rem; /* ä¸‹è· */
      font-weight: bold; /* ç²—é«” */
      border-radius: 0.25rem; /* åœ“è§’ */
    }
    h1 { /* ä¸»æ¨™é¡Œæ¨£å¼ */
      font-size: 1.5rem; /* å­—é«”å¤§å° */
      margin: 1rem 0 0.5rem; /* ä¸Šä¸‹é‚Šè· */
    }
    .time-now { /* é¡¯ç¤ºç¾åœ¨æ™‚é–“ */
      font-size: 1rem; /* å­—é«”å¤§å° */
      color: #555; /* å­—é«”é¡è‰² */
      margin-bottom: 0.5rem; /* ä¸‹é‚Šè· */
    }
    .select-group { /* æ™‚é–“é¸æ“‡å™¨å€å¡Š */
      display: flex; /* æ°´å¹³æ’åˆ— */
      justify-content: center; /* ç½®ä¸­ */
      margin-bottom: 1rem; /* ä¸‹é‚Šè· */
    }
    select { /* ä¸‹æ‹‰å¼é¸å–® */
      font-size: 1.2rem; /* å­—é«”å¤§å° */
      padding: 0.5rem; /* å…§è· */
      margin: 0 0.5rem; /* å·¦å³è· */
      border-radius: 0.25rem; /* åœ“è§’ */
      border: 1px solid #ccc; /* é‚Šæ¡†é¡è‰² */
    }
    button { /* æŒ‰éˆ•æ¨£å¼ */
      width: 100%; /* æ»¿ç‰ˆ */
      padding: 0.75rem; /* å…§è· */
      font-size: 1rem; /* å­—é«”å¤§å° */
      border: none; /* ç„¡é‚Šæ¡† */
      border-radius: 0.25rem; /* åœ“è§’ */
      background: #4CAF50; /* èƒŒæ™¯è‰² */
      color: white; /* å­—é«”é¡è‰² */
      cursor: pointer; /* æ»‘é¼ æ¨£å¼ */
    }
    button:hover { background: #45A049; } /* æ»‘é¼ æ‡¸åœè®Šè‰² */
    .result { /* çµæœé¡¯ç¤ºå€ */
      margin-top: 1.2rem; /* ä¸Šé‚Šè· */
      text-align: center; /* ç½®ä¸­ */
      font-size: 1.3rem; /* å­—é«”å¤§å° */
      font-weight: bold; /* ç²—é«” */
      white-space: pre-line; /* æ›è¡Œä¿ç•™ */
    }
  </style>
</head>
<body>
  <div class="container"> <!-- åŒ…è£¹ä¸»é«”å…§å®¹ -->
    <p><a href="leave.html" style="color: #4CAF50; text-decoration: none;">ä»Šå¤©å¥½ç´¯ï¼Œè«‹å€‹å‡å—?ğŸ–ï¸æˆ‘è¦è«‹å‡!!(åˆ‡æ›åˆ°è«‹å‡ç¥å™¨)</a></p>
    <div class="stamp">æ¯å¤©éƒ½æœƒæœ‰å¥½äº‹ç™¼ç”Ÿ(â ï¼¾â âˆ‡â ï¼¾â )â ï¾‰â â™ª</div> <!-- æµ®æ°´å°æ–‡å­— -->
    <h1>ç¤¾ç•œçŸ­æš«è„«é›¢è¨ˆç®—å™¨</h1> <!-- ä¸»æ¨™é¡Œ -->
    <div class="time-now" id="time-now">â€”</div> <!-- é¡¯ç¤ºç¾åœ¨æ™‚é–“ -->
    <div class="select-group"> <!-- é¸æ“‡ä¸Šç­æ™‚é–“å€å¡Š -->
      <select id="hour"></select> <!-- å°æ™‚é¸æ“‡ -->
      <select id="minute"></select> <!-- åˆ†é˜é¸æ“‡ -->
    </div>
    <button id="calc-btn">è¨ˆç®—ä¸‹ç­æ™‚é–“</button> <!-- åŸ·è¡ŒæŒ‰éˆ• -->
    <div class="result" id="result">â€”</div> <!-- é¡¯ç¤ºçµæœ -->
  </div>

  <script>
    const hourSel = document.getElementById('hour'); // å–å¾—å°æ™‚ä¸‹æ‹‰é¸å–®
    const minSel = document.getElementById('minute'); // å–å¾—åˆ†é˜ä¸‹æ‹‰é¸å–®
    const result = document.getElementById('result'); // çµæœé¡¯ç¤ºå…ƒä»¶
    const timeNow = document.getElementById('time-now'); // ç¾åœ¨æ™‚é–“é¡¯ç¤ºå…ƒä»¶
    const calcBtn = document.getElementById('calc-btn'); // æŒ‰éˆ•å…ƒä»¶

    [7, 8].forEach(h => hourSel.add(new Option(String(h).padStart(2, '0'), h))); // åŠ å…¥ 07ã€08 å°æ™‚é¸é …
    for (let m = 0; m < 60; m++) minSel.add(new Option(String(m).padStart(2, '0'), m)); // åŠ å…¥ 00~59 åˆ†é˜é¸é …
    hourSel.value = '7'; // é è¨­å°æ™‚ç‚º 7
    minSel.value = '30'; // é è¨­åˆ†é˜ç‚º 30

    function getTaiwanNow() { // å–å¾—å°ç£ç•¶å‰æ™‚é–“
      const local = new Date(); // ç•¶å‰æ™‚é–“
      const offset = local.getTimezoneOffset(); // èˆ‡ UTC çš„æ™‚å·®
      return offset === -480 ? local : new Date(local.getTime() + (480 + offset) * 60000); // ä¿®æ­£ç‚º UTC+8
    }

    function updateNowDisplay() { // æ›´æ–°ç¾åœ¨æ™‚é–“ç•«é¢
      const now = getTaiwanNow(); // å–å¾—æ™‚é–“
      const hh = String(now.getHours()).padStart(2, '0'); // å°æ™‚è½‰å­—ä¸²
      const mm = String(now.getMinutes()).padStart(2, '0'); // åˆ†é˜è½‰å­—ä¸²
      timeNow.textContent = `ç¾åœ¨æ™‚é–“ï¼š${hh}:${mm}`; // é¡¯ç¤º
    }

    calcBtn.addEventListener('click', () => { // ç¶å®šæŒ‰éˆ•é»æ“Š
      updateNowDisplay(); // æ›´æ–°ç¾åœ¨æ™‚é–“

      const h = +hourSel.value, m = +minSel.value; // å°‡è¼¸å…¥è½‰æˆæ•¸å­—
      const now = getTaiwanNow(); // ç¾åœ¨æ™‚é–“
      let start = new Date(now); // å»ºç«‹é–‹å§‹æ™‚é–“
      start.setHours(h, m, 0, 0); // è¨­å®šç‚ºé¸å–æ™‚é–“
      if (start - now > 3600000) start.setDate(start.getDate() - 1); // é¿å…æ™‚é–“è·¨æ—¥éŒ¯èª¤

      let end; // ä¸‹ç­æ™‚é–“
      let remark = ''; // é¡¯ç¤ºå‚™è¨»
      let color = '#333'; // å­—é«”é¡è‰²

      if (h < 7 || (h === 7 && m < 30)) { // å¤ªæ—©åˆ°
        end = new Date(start);
        end.setHours(17, 0, 0, 0);
        remark = 'ä½ å¤ªæ—©åˆ°å›‰~æœ‰ç¡é£½å—?ä¸‹ç­æ™‚é–“ä¸€æ¨£æ˜¯17:00å–”!';
        color = '#d32f2f';
      } else if (h > 8 || (h === 8 && m > 30)) { // é²åˆ°
        end = new Date(start);
        end.setHours(17, 30, 0, 0);
        remark = 'ä½ é²åˆ°å›‰ï¼Œè©²è«‹ä¼‘å›‰~ä¸‹ç­æ™‚é–“ä¸€æ¨£æ˜¯17:30å–”!';
        color = '#d32f2f';
      } else if (h === 8 && [29, 30].includes(m)) { // å£“ç·š
        end = new Date(start);
        end.setHours(18, 0, 0, 0);
        remark = 'å£“ç·šä»”!18:00æº–æ™‚ä¸‹ç­';
        color = '#d32f2f';
      } else if (h === 7 && m <= 30) { // æ­£å¸¸æ—©ç­
        end = new Date(start);
        end.setHours(17, 0, 0, 0);
      } else if (h === 8 && m >= 30) { // æ­£å¸¸æ™šç­
        end = new Date(start);
        end.setHours(18, 0, 0, 0);
      } else { // å…¶ä»–æƒ…æ³
        end = new Date(start.getTime() + 9.5 * 3600000);
      }

      const diffMin = Math.round((end - now) / 60000); // å·®å€¼åˆ†é˜æ•¸
      const sign = diffMin >= 0 ? 1 : -1; // æ­£æˆ–è² 
      const absMin = Math.abs(diffMin); // çµ•å°å€¼
      const diffH = Math.floor(absMin / 60); // å°æ™‚å·®
      const diffM = absMin % 60; // åˆ†é˜å·®
      const endStr = end.toTimeString().slice(0, 5); // é¡¯ç¤º HH:mm

      result.style.color = color; // è¨­å®šå­—é«”é¡è‰²
      result.textContent = `${remark ? `ğŸ“Œ ${remark}\n` : ''}` +
        (sign > 0
          ? `âœ… ä¸‹ç­æ™‚é–“ï¼š${endStr}\nâ³ é‚„å‰© ${diffH} å°æ™‚ ${diffM} åˆ†é˜`
          : `âœ… ä½ å¯ä»¥ä¸‹ç­å•¦ï¼ï¼ˆå·²è¶…é ${diffH} å°æ™‚ ${diffM} åˆ†é˜ï¼‰`);
    });

    updateNowDisplay(); // é é¢åˆæ¬¡è¼‰å…¥æ™‚é¡¯ç¤ºç¾åœ¨æ™‚é–“
  </script>
</body>
</html>

