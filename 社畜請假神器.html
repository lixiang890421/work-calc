<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ç¤¾ç•œè«‹å‡è¨ˆç®—ç¥å™¨</title>
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; background: #f5f5f5; padding: 2em; }
    .container { max-width: 600px; margin: auto; background: white; padding: 2em; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1 { color: #444; }
    input, button { padding: 0.5em; margin: 0.5em 0; font-size: 1em; }
    #result { margin-top: 1em; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <p><a href="index.html" style="color: #444; text-decoration: none;">ğŸ  å›åˆ°ä¸‹ç­è¨ˆç®—å™¨</a></p>
    <h1>ç¤¾ç•œè«‹å‡è¨ˆç®—ç¥å™¨ â›±ï¸</h1>
    <label for="checkin">ä¸Šç­æ™‚é–“ï¼š</label><br>
    <input type="time" id="checkin" required><br>

    <label for="leaveHours">è«‹å‡å¹¾å°æ™‚ï¼Ÿ</label><br>
    <input type="number" id="leaveHours" min="0" max="8" step="0.5" required> å°æ™‚<br>

    <button onclick="calculateAdjustedLeaveTime()">ç®—æˆ‘å¹¾é»èƒ½ä¸‹ç­</button>
    <div id="result"></div>
  </div>

  <script>
    function parseTimeToMinutes(timeStr) {
      const [hour, minute] = timeStr.split(":").map(Number);
      return hour * 60 + minute;
    }

    function minutesToTimeStr(minutes) {
      const hour = Math.floor(minutes / 60);
      const min = minutes % 60;
      return `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
    }

    function calculateAdjustedLeaveTime() {
      const checkinInput = document.getElementById("checkin").value;
      const leaveHoursInput = parseFloat(document.getElementById("leaveHours").value);

      if (!checkinInput || isNaN(leaveHoursInput)) {
        document.getElementById("result").innerText = "è«‹æ­£ç¢ºå¡«å¯«ä¸Šç­æ™‚é–“èˆ‡è«‹å‡æ™‚æ•¸ï¼";
        return;
      }

      const checkin = parseTimeToMinutes(checkinInput);
      const lunchStart = parseTimeToMinutes("12:00");
      const lunchEnd = parseTimeToMinutes("13:30");

      const requiredWork = 480 - (leaveHoursInput * 60); // 8å°æ™‚ - è«‹å‡æ™‚é–“

      let worked = 0;
      let current = checkin;

      while (worked < requiredWork) {
        // åˆ¤æ–·æ˜¯å¦é‡åˆ°åˆä¼‘ï¼Œè¦è·³é
        if (current === lunchStart) {
          current = lunchEnd;
        } else {
          worked++;
          current++;
        }
      }

      const resultTime = minutesToTimeStr(current);
      document.getElementById("result").innerHTML =
        `ğŸ§® ä½ è«‹å‡äº† ${leaveHoursInput} å°æ™‚ï¼Œåªéœ€ä¸Šç­ ${requiredWork} åˆ†é˜<br>` +
        `âœ… <strong>æœ€æ—©å¯ä¸‹ç­æ™‚é–“ï¼š${resultTime}</strong>`;
    }
  </script>
</body>
</html>

